<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  
/*
function getNumber(){  

  var x = Math.floor(Math.random() * 10); 
  document.getElementById("demo").innerHTML =  x;      
        
}
*/


function setText(msg) {
      
    var x = Math.floor(Math.random() * msg['resultCount']); 
    //console.log(msg); //Só para debug!!
    //console.log(msg['results'][x]['previewUrl']);
    document.getElementById("my-video").setAttribute('src', msg['results'][x]['previewUrl']);
    document.getElementById("demo").innerHTML = "Música : " + msg['results'][x]['trackName'];
    //console.log(msg['results'][x]['previewUrl']);
  

}


function getSong(){
  var artista = document.getElementById("fname").value; 


    fetch("https://cors-anywhere.herokuapp.com/https://itunes.apple.com/search?term="+ artista + "&entity=musicVideo") //WEB API -  HTTP
    .then(request => request.text()) //Retorna o objeto request
    .then(data => setText(JSON.parse(data))) //Obtem os dados e transforma em JSON

}


</script>

</head>
<body>
  <h4>Assita um video surpresa do seu artista preferido</h4>



  <label for="fname">Artista:</label>
  <input type="text" id="fname" name="fname"><br><br>
  <button onclick="getSong();">Get Song</button>
  <p id="demo"></p>


  <video  id="my-video" width="400" controls>
    <source src="" type="video/mp4">
    Your browser does not support HTML video.
  </video>

  <h3 id="demo"></h3>

  <form action="index.html">
    <input type="submit" value="Home" />
  </form>

</body>
</html>
